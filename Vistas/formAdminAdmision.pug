doctype html
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= admision ? 'Editar Admisión' : 'Nueva Admisión'
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css")
    style.
      body {
        background-color: #f0f4f8;
      }
      .form-container {
        max-width: 700px;
        margin: 50px auto;
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      }

  body
    include navbar.pug

    div.form-container
      h2.text-center.mb-4= admision ? 'Editar Admisión' : 'Nueva Admisión'

      if error
        div.alert.alert-danger.text-center= error

      form(method="post" action=admision ? `/admin/admisiones/editar/${admision.idAdmision}` : '/admin/admisiones/nuevo')

        div.mb-3
          label.form-label(for="paciente_id") Paciente
          select.form-select(name="paciente_id" id="paciente_id" required=true)
            option(value="" disabled selected=!(admision)) Seleccione un paciente
            each paciente in pacientes
              option(value=paciente.idPaciente selected=admision && admision.paciente_id===paciente.idPaciente)= `${paciente.apellido}, ${paciente.nombre} - DNI: ${paciente.dni}`

        div.mb-3
          label.form-label(for="motivo_id") Motivo
          select.form-select(name="motivo_id" id="motivo_id" required=true)
            option(value="" disabled selected=!(admision)) Seleccione un motivo
            each motivo in motivos
              option(value=motivo.idMotivo selected=admision && admision.motivo_id===motivo.idMotivo)= motivo.descripcion

        div.mb-3
          label.form-label(for="origen_id") Origen
          select.form-select(name="origen_id" id="origen_id" required=true)
            option(value="" disabled selected=!(admision)) Seleccione un origen
            each origen in origenes
              option(value=origen.idOrigen selected=admision && admision.origen_id===origen.idOrigen)= origen.nombre

        div.mb-3
          label.form-label(for="habitacion_id") Habitación
          select.form-select(name="habitacion_id" id="habitacion_id" required=true)
            option(value="" disabled selected=!(admision)) Seleccione una habitación
            each habitacion in habitaciones
              option(value=habitacion.idHabitacion selected=admision && admision.habitacion_id===habitacion.idHabitacion)= `N° ${habitacion.numero} - Ala: ${habitacion.ala_id} - Unidad: ${habitacion.unidad_id}`

        div.mb-3
          label.form-label(for="cama_id") Cama (Solo en modo Edición)
          select.form-select(name="cama_id" id="cama_id" required=true)
            option(value="" disabled selected=!(admision)) Seleccione una cama
            each cama in camas
              option(value=cama.idCama selected=admision && admision.cama_id===cama.idCama)= `Cama ${cama.idCama} - Estado: ${cama.estado}`

        div.text-center.mt-4
          button.btn.btn-primary(type="submit")= admision ? 'Guardar Cambios' : 'Crear Admisión'
          a.btn.btn-secondary.ms-2(href="/admin/admisiones") Cancelar

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")
