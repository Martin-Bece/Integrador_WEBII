doctype html
include navbar.pug
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= paciente ? 'Editar Paciente' : 'Nuevo Paciente'
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css")
    style.
      body {
        background-color: #f0f4f8;
      }
      .form-container {
        max-width: 650px;
        margin: 50px auto;
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      }

  body
    +navbar

    div.form-container
      h2.text-center.mb-4= paciente ? 'Editar Paciente' : 'Nuevo Paciente'

      form(method="post" action=paciente ? `/admin/pacientes/editar/${paciente.idPaciente}` : '/admin/pacientes/nuevo')
        
        div.mb-3
          label.form-label(for="dni") DNI
          input.form-control(type="text", name="dni", id="dni", required=true, value=paciente ? paciente.dni : '')

        div.mb-3
          label.form-label(for="nombre") Nombre
          input.form-control(type="text", name="nombre", id="nombre", required=true, value=paciente ? paciente.nombre : '')

        div.mb-3
          label.form-label(for="apellido") Apellido
          input.form-control(type="text", name="apellido", id="apellido", required=true, value=paciente ? paciente.apellido : '')

        div.mb-3
          label.form-label(for="fecha_nacimiento") Fecha de Nacimiento
          input.form-control(type="date", name="fecha_nacimiento", id="fecha_nacimiento", required=true, value=paciente ? paciente.fecha_nacimiento : '')

        div.mb-3
          label.form-label(for="sexo") Sexo
          select.form-select(name="sexo", id="sexo")
            option(value="M", selected=paciente && paciente.sexo==='M') Masculino
            option(value="F", selected=paciente && paciente.sexo==='F') Femenino
            option(value="O", selected=paciente && paciente.sexo==='O') Otro

        div.mb-3
          label.form-label(for="telefono") Teléfono
          input.form-control(type="text", name="telefono", id="telefono", value=paciente ? paciente.telefono : '')

        div.mb-3
          label.form-label(for="direccion") Dirección
          input.form-control(type="text", name="direccion", id="direccion", value=paciente ? paciente.direccion : '')

        div.mb-3
          label.form-label(for="mutual_id") Mutual
          select.form-select(name="mutual_id", id="mutual_id")
            option(value="") Seleccionar Mutual
            each mutual in mutuales
              option(value=mutual.idMutual, selected=paciente && paciente.mutual_id===mutual.idMutual)= mutual.nombre

        div.form-check.mb-3
          input.form-check-input(type="checkbox", name="activo", id="activo", checked=paciente ? paciente.activo : true)
          label.form-check-label(for="activo") Activo

        div.text-center.mt-4
          button.btn.btn-primary(type="submit")= paciente ? 'Guardar Cambios' : 'Crear Paciente'
          a.btn.btn-secondary.ms-2(href="/admin/pacientes") Cancelar

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")
