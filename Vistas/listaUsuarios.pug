doctype html
include navbar.pug
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Lista de Usuarios
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css")
    style.
      body {
        background-color: #f0f4f8;
      }
      .filter-select {
        max-width: 250px;
      }

  body
    +navbar

    div.container.mt-5
      h2.text-center.mb-4 Lista de Usuarios

      .d-flex.justify-content-between.align-items-center.mb-3
        a.btn.btn-primary(href="/admin/usuarios/nuevo")
          i.bi.bi-person-plus-fill.me-1
          | Nuevo Usuario

        form(method="get" action="/admin/usuarios" class="d-flex align-items-center")
          label.form-label.me-2(for="filtroRol") Filtrar por rol:
          select.form-select.d-inline-block.filter-select#filtroRol(name="rol" onchange="this.form.submit()")
            option(value="todos" selected=rolSeleccionado==='todos') Todos
            option(value="admision" selected=rolSeleccionado==='admision') Admisión
            option(value="medico" selected=rolSeleccionado==='medico') Médicos
            option(value="enfermero" selected=rolSeleccionado==='enfermero') Enfermeros
            option(value="admin" selected=rolSeleccionado==='admin') Administración

      if usuarios.length > 0
        table.table.table-hover.shadow-sm
          thead.table-light
            tr
              th ID
              th Usuario
              th Rol
              th DNI
              th Acciones
          tbody
            each usuario in usuarios
              tr
                td= usuario.idUsuario
                td= usuario.usuario
                td.text-capitalize= usuario.rol
                td= usuario.dni
                td
                  a.btn.btn-sm.btn-warning.me-2(href=`/admin/usuarios/editar/${usuario.idUsuario}`)
                    i.bi.bi-pencil-fill
                  a.btn.btn-sm.btn-secondary.me-2(href=`/admin/usuarios/cambiar-contrasea/${usuario.idUsuario}`)
                    i.bi.bi-key-fill
                  a.btn.btn-sm.btn-danger(href=`/admin/usuarios/eliminar/${usuario.idUsuario}`)
                    i.bi.bi-trash-fill
      else
        p.text-muted.text-center No hay usuarios cargados en este momento.

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")
