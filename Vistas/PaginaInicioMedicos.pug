doctype html
include navbar.pug
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Pacientes Asignados
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")
    style.
      body {
        background-color: #f0f4f8;
      }
      .badge-alta {
        background-color: #dc3545;
      }
      .badge-media {
        background-color: #ffc107;
        color: black;
      }
      .badge-baja {
        background-color: #28a745;
      }

  body
    +navbar

    div.container.mt-5
      h2.text-center.mb-4 Pacientes Asignados - Médico Clínico

      if pacientes.length > 0
        table.table.table-hover.shadow-sm
          thead.table-light
            tr
              th DNI
              th Nombre
              th Motivo de Internación
              th Síntoma Principal
              th Prioridad
              th Acciones
          tbody
            each admision in pacientes
              - var paciente = admision.paciente
              - var motivo = admision.motivo
              - var sintomaPrincipal = (motivo && motivo.sintomas && motivo.sintomas[0]) || {}
              tr
                td= paciente.dni
                td #{paciente.nombre} #{paciente.apellido}
                td= motivo ? motivo.descripcion : '-'
                td= sintomaPrincipal.descripcion || '-'
                td
                  if sintomaPrincipal.prioridad === 'alta'
                    span.badge.badge-alta.text-white Alta
                  else if sintomaPrincipal.prioridad === 'media'
                    span.badge.badge-media.text-dark Media
                  else if sintomaPrincipal.prioridad === 'baja'
                    span.badge.badge-baja.text-white Baja
                  else
                    span.text-muted -
                td
                  a.btn.btn-sm.btn-primary(href=`/medicos/atender/${paciente.dni}`) Atender
      else
        p.text-muted.text-center No hay pacientes asignados en este momento.

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")
